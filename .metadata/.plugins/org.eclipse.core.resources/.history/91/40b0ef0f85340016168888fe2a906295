
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.PrintWriter;
import java.net.Socket;
import java.util.Scanner;

import javax.swing.JFrame;
import javax.swing.JTextField;

public class PesterChumClient extends JFrame implements KeyListener,
		ActionListener {
	public static void main(String[] args) throws IOException {
		PesterChumClient client = new PesterChumClient();
	}
	// Right now it connects to another computer and sends/recieves strings
	BufferedReader in;

	PrintWriter out;
	JTextField textfield = new JTextField(10);
	Scanner scan = new Scanner(System.in);

	Socket socket;

	public PesterChumClient() throws IOException {
		this.setBounds(760, 400, 500, 500);
		setVisible(true);
		this.setTitle("Client");
		setSize(500, 500);
		this.setLayout(new GridLayout(5, 5));
		textfield.addActionListener(this);
		textfield.addKeyListener(this);
		this.add(textfield);

		// InetAddress ip=new InetAddress();
		String hostName = "192.168.1.5";// server ip,
		int port = 55000; // random number for the time being

		String serverAddress; // whatever the hell the servers ip address is

		hostName = "10.1.3.41";

		while (true) {

			socket = new Socket(hostName, port); // (name,port) or(Inet ip,port)

			in = new BufferedReader(new InputStreamReader(
					socket.getInputStream()));
			out = new PrintWriter(socket.getOutputStream(), true);

			if (textfield.getText() != null) {
				out.println(textfield.getText());
			}
			// BufferedReader r= new BufferedReader(textfield);
			// scan=new Scanner((Readable) textfield);
			// out.println();
			// out.println(scan.nextLine());//remember
			out.flush();

			out.close();
			socket.close();
			Thread.yield();
		}

	}

	@Override
	public void actionPerformed(ActionEvent arg0) {
		// TODO Auto-generated method stub

	}

	@Override
	public void keyPressed(KeyEvent key) {
		if (key.getKeyCode() == KeyEvent.VK_ENTER) {

			out.println(textfield.getText() + "asdf");
			// out.print(scan.nextLine());
			textfield.setText("");

			out.flush();

		}
	}

	@Override
	public void keyReleased(KeyEvent arg0) {
		// TODO Auto-generated method stub

	}

	@Override
	public void keyTyped(KeyEvent arg0) {
		// TODO Auto-generated method stub

	}

}
